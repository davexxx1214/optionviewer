<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>美股期权分析评分系统</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <!-- 标题区域 -->
        <div class="header">
            <h1>📊 美股期权分析评分系统</h1>
            <p class="subtitle">基于多维度指标的智能期权分析与评分</p>
            <div id="dataSourceIndicator" class="data-source-indicator loading">正在加载...</div>
            <div id="hvCacheIndicator" class="data-source-indicator" style="margin-left: 10px;">HV缓存未知</div>
        </div>

        <!-- 控制面板 -->
        <div class="control-panel">
            <div class="input-group">
                <label for="stockSelect">选择股票</label>
                <div class="selector-wrapper stock-selector">
                    <div class="dropdown" id="stockDropdown"></div>
                </div>
            </div>

            <div class="input-group">
                <label for="optionType">期权类型</label>
                <div class="selector-wrapper option-type-selector">
                    <div class="dropdown" id="optionTypeDropdown">
                        <div class="dropdown-item" data-value="call">买入看涨 (Buy Call)</div>
                        <div class="dropdown-item" data-value="put">买入看跌 (Buy Put)</div>
                    </div>
                </div>
            </div>

            <div class="input-group">
                <label for="expiry">到期天数</label>
                <div class="selector-wrapper expiry-selector">
                    <div class="dropdown" id="expiryDropdown">
                        <div class="dropdown-item" data-value="30">30天</div>
                        <div class="dropdown-item" data-value="60">60天</div>
                        <div class="dropdown-item" data-value="90">90天</div>
                    </div>
                </div>
            </div>

            <button id="analyzeBtn" class="analyze-btn" disabled>
                <span>🔍 分析期权</span>
            </button>
        </div>

        <!-- 管理面板 -->
        <div class="admin-panel">
            <div class="admin-section">
                <h3>📈 数据管理</h3>
                <div class="admin-controls">
                    <div class="benchmark-status">
                        <div id="benchmarkStatus" class="status-indicator">正在检查基准数据状态...</div>
                        <div id="benchmarkInfo" class="benchmark-info"></div>
                    </div>
                    
                    <div class="admin-buttons">
                        <button id="updateNVDABtn" class="admin-btn nvda-btn">
                            <span>🚀 更新NVDA半年基准</span>
                        </button>
                        <button id="viewBenchmarkBtn" class="admin-btn view-btn">
                            <span>📊 查看NVDA基准数据</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 更新进度面板 -->
        <div id="updateProgressPanel" class="progress-panel" style="display: none;">
            <div class="progress-header">
                <h3>📊 历史基准数据更新进度</h3>
                <button id="closeProgressBtn" class="close-btn">×</button>
            </div>
            <div class="progress-content">
                <div class="progress-bar-container">
                    <div id="progressBar" class="progress-bar">
                        <div id="progressFill" class="progress-fill"></div>
                    </div>
                    <div id="progressText" class="progress-text">准备开始...</div>
                </div>
                <div id="progressLog" class="progress-log"></div>
            </div>
        </div>

        <!-- 基准数据查看面板 -->
        <div id="benchmarkViewPanel" class="benchmark-panel" style="display: none;">
            <div class="benchmark-header">
                <h3>📊 NVDA半年基准数据详情</h3>
                <button id="closeBenchmarkBtn" class="close-btn">×</button>
            </div>
            <div id="benchmarkContent" class="benchmark-content">
                <div class="loading">正在加载基准数据...</div>
            </div>
        </div>

        <!-- 加载指示器 -->
        <div id="loadingIndicator" class="loading-indicator">
            <div class="spinner"></div>
            <span>正在分析期权数据...</span>
        </div>

        <!-- 错误消息 -->
        <div id="errorMessage" class="error-message"></div>

        <!-- 结果展示区域 -->
        <div id="resultsContainer" class="results-container">
            <div class="results-header">
                <h2 id="resultsTitle">期权分析结果</h2>
                <div class="results-info">
                    <div id="stockInfo" class="stock-info">股票信息</div>
                    <div id="updateTime" class="update-time">更新时间</div>
                </div>
            </div>

            <div class="table-container">
                <table class="options-table">
                    <thead>
                        <tr>
                            <th class="sortable" data-sort="symbol">股票代码</th>
                            <th>筛选状态</th>
                            <th class="sortable" data-sort="daysToExpiry">到期天数</th>
                            <th class="sortable" data-sort="strikePrice">行权价</th>
                            <th class="sortable" data-sort="premium">权利金</th>
                            <th>类型</th>
                            <th class="sortable" data-sort="bid">买入报价</th>
                            <th class="sortable" data-sort="ask">卖出报价</th>
                            <th class="sortable" data-sort="volume">当日成交</th>
                            <th class="sortable" data-sort="openInterest">未平仓</th>
                            <th class="sortable" data-sort="impliedVolatility">隐含波动率</th>
                            <th class="sortable" data-sort="historicalVolatility">历史波动率</th>
                            <th class="sortable" data-sort="ivHvRatio">IV/HV比率</th>
                            <th class="sortable" data-sort="score">评分</th>
                        </tr>
                    </thead>
                    <tbody id="optionsTableBody">
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
</body>
</html> 